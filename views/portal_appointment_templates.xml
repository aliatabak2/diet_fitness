<odoo>
<!--    portal ana menüye "Randevular" linki 
<template id="portal_my_home_inject_diet_appt"
            inherit_id="portal.portal_my_home"
            name="Diet: Inject Appointments Block">
    wrap içine güvenli ekleme 
    <xpath expr="//div[@id='wrap']" position="inside">
      <section class="oe_structure mt-3" id="diet_portal_quick_links">
        <div class="container">
          <div class="d-flex flex-wrap align-items-center gap-2">
            
 diğer diyet linklerini bura ekle yapınca

            <a class="btn btn-secondary"
               href="/my/diet/appointments">
              <i class="fa fa-calendar-check-o me-1"/> Randevular
            </a>
          </div>
        </div>
      </section>
    </xpath>
  </template>
 -->

  <!-- Liste -->
  <template id="portal_appointment_list" name="Diet: Appointment List">
    <t t-call="portal.portal_layout">
      <div class="container py-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h3>Randevularım</h3>
          <a href="/my/diet/appointment/new" class="btn btn-primary">
            <i class="fa fa-plus me-1"/> Yeni Randevu Talebi
          </a>
        </div>

        <t t-if="not appts">
          <div class="alert alert-info">Henüz randevunuz yok.</div>
        </t>
        <t t-if="appts">
          <div class="list-group">
            <t t-foreach="appts" t-as="a">
              <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between">
                <div>
                  <strong t-esc="a.name"/> —
                  <span class="text-muted" t-esc="dict(coach='Koç', dietitian='Diyetisyen').get(a.type)"/>
                  <small class="ms-2">Danışman: <t t-esc="a.advisor_id.name"/></small>
                  <div class="small text-muted mt-1">
                    <t t-esc="a.date_start"/> → <t t-esc="a.date_end"/>
                  </div>
                </div>
                <span class="badge bg-light text-dark" t-esc="dict(request='Talep',confirm='Onaylandı',done='Tamam',cancel='İptal').get(a.state)"/>
              </a>
            </t>
          </div>
        </t>
      </div>
    </t>
  </template>

  <!-- Yeni Randevu -->
  <template id="portal_appointment_new" name="Diet: Appointment New">
    <t t-call="portal.portal_layout">
      <div class="container py-4">
        <a href="/my/diet/appointments" class="btn btn-link">← Geri</a>
        <h3 class="mb-3">Yeni Randevu Talebi</h3>

        <form action="/my/diet/appointment/create" method="post" class="card p-3">
          <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label">Konu</label>
              <input class="form-control" type="text" name="name" placeholder="Örn: Haftalık kontrol" required="required"/>
            </div>
            <div class="col-md-6">
              <label class="form-label">Tür</label>
              <select name="type" class="form-select">
                <option value="coach">Koç</option>
                <option value="dietitian">Diyetisyen</option>
              </select>
            </div>
            <div class="col-md-6">
              <label class="form-label">Danışman (yalnızca admin listelenir)</label>
              <select name="advisor_id" class="form-select" required="required">
                <t t-foreach="advisors" t-as="u">
                  <option t-att-value="u.id" t-esc="u.name"/>
                </t>
              </select>
            </div>
            <div class="col-md-3">
              <label class="form-label">Başlangıç</label>
              <input class="form-control" type="datetime-local" name="date_start" required="required"/>
            </div>
            <div class="col-md-3">
              <label class="form-label">Bitiş</label>
              <input class="form-control" type="datetime-local" name="date_end" required="required"/>
            </div>
            <div class="col-12">
              <label class="form-label">Notlar</label>
              <textarea class="form-control" name="note" rows="3"></textarea>
            </div>
          </div>
          <div class="mt-3">
            <button class="btn btn-primary" type="submit">
              <i class="fa fa-paper-plane me-1"/> Talep Gönder
            </button>
          </div>
        </form>
      </div>
    </t>
  </template>
</odoo>
